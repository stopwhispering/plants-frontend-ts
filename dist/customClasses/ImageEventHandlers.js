sap.ui.define(["sap/m/MessageToast","plants/ui/customClasses/Util","sap/ui/base/ManagedObject"],function(e,n,t){const a=t.extend("plants.ui.customClasses.ImageEventHandlers",{constructor:function e(n){t.prototype.constructor.call(this);this.applyToFragment=n},assignPlantToImage:function t(a,s,i){var o=s.plants;var r={plant_id:a.id,key:a.plant_name,text:a.plant_name};if(n.isDictKeyInArray(r,o)){e.show("Plant Name already assigned. ");return false}else{o.push(r);console.log("Assigned plant to image: "+a.plant_name+" ("+a.id+")");i.updateBindings(false);return true}},assignImageToEvent:function e(n){var t=n.getBindingContext("images").getPath();this.applyToFragment("dialogAssignEventToImage",e=>{e.bindElement({path:t,model:"images"});e.openBy(n,true)})},assignEventToImage:function n(t,a,s){const i=t.getBindingContext("images").getObject();var o={filename:i.filename};const r=t.getBindingContext("events").getObject();if(!!r.images&&r.images.length>0){var g=r.images.find(function(e){return e.filename===o.filename});if(g){e.show("Event already assigned to image.");s.close();return}}if(!r.images){r.images=[o]}else{r.images.push(o)}e.show("Assigned.");a.updateBindings(false);s.close()},unassignImageFromEvent:function n(t,a){var s=a.getProperty(t);var i=t.substring(0,t.lastIndexOf("/"));var o=a.getProperty(i);var r=o.indexOf(s);if(r===-1){e.show("Can't find image.");return}o.splice(r,1);a.refresh()},handleTypeMissmatch:function n(t,a){var s=t.getFileType().map(e=>"*."+e);var i=s.join(", ");e.show("The file type *."+a+" is not supported. Choose one of the following types: "+i)},removePlantImageTokenFromModel:function e(n,t,a){const s=t.plants;const i=s.findIndex(e=>e.key===n);if(i<0)throw new Error("Plant not found in image's plants tags array.");s.splice(i,1);a.updateBindings(false)},removeKeywordImageTokenFromModel:function e(n,t,a){const s=t.keywords;const i=s.findIndex(e=>e.keyword===n);if(i<0)throw new Error("Keyword not found in image's keywords tags array.");s.splice(i,1);a.updateBindings(false)}});return a});