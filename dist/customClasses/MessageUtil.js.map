{"version":3,"file":"MessageUtil.js","names":["MessageType","MessageUtil","ManagedObject","constructor","oContext","_oMessageManager","sap","ui","getCore","getMessageManager","setModel","getMessageModel","addMessageFromBackend","backendMessage","type","oMessage","Message","message","additionalText","description","addMessages","console","log","addMessage","sType","sMessage","sAdditionalText","sDescription","Error","removeAllMessages","getInstance","_instance"],"sources":["../../src/customClasses/MessageUtil.ts"],"sourcesContent":["import Message from \"sap/ui/core/message/Message\"\r\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\r\nimport { MessageType } from \"sap/ui/core/library\";\r\nimport Component from \"sap/ui/core/Component\";\r\nimport { PMessage } from \"../definitions/MessagesFromBackend\";\r\n\r\n/**\r\n * @namespace plants.ui.customClasses\r\n */\r\nexport default class MessageUtil extends ManagedObject {\r\n\tprivate static _instance: MessageUtil;\r\n\tprivate _oMessageManager;\r\n\r\n\tpublic static getInstance(oContext?: Component): MessageUtil {\r\n\t\tif (!MessageUtil._instance && !oContext) {\r\n\t\t\tthrow new Error(\"MessageUtil not initialized and no context supplied\");\r\n\t\t} else if (MessageUtil._instance && oContext) {\r\n\t\t\tthrow new Error(\"MessageUtil already initialized\");\r\n\t\t} else if (!MessageUtil._instance && oContext) {\r\n\t\t\tMessageUtil._instance = new MessageUtil(oContext);\r\n\t\t}\r\n\t\treturn MessageUtil._instance;\r\n\t}\r\n\r\n\tprivate constructor(oContext: Component) {\r\n\t\tsuper();\r\n\t\t// name the MessageManager's model so we can use it in the MessagePopover fragment\r\n\t\t// attach the model to supplied context (component to make it available everywhere)\r\n\t\tthis._oMessageManager = sap.ui.getCore().getMessageManager();\r\n\t\toContext.setModel(this._oMessageManager.getMessageModel(), \"messages\");\r\n\t}\r\n\r\n\tpublic addMessageFromBackend(backendMessage: PMessage) {\r\n\t\t// wrapper with only one parameter, just adding a message from frontend as is into \r\n\t\t// message model; exception: debug messages are not inserted\r\n\t\tif (backendMessage.type !== 'Debug') {\r\n\t\t\tvar oMessage = new Message({\r\n\t\t\t\ttype: backendMessage.type,\r\n\t\t\t\tmessage: backendMessage.message,\r\n\t\t\t\tadditionalText: backendMessage.additionalText,\r\n\t\t\t\tdescription: backendMessage.description\r\n\t\t\t});\r\n\t\t\tthis._oMessageManager.addMessages(oMessage);\r\n\t\t}\r\n\r\n\t\t// sap.base.Log is unusable as the default lib spams the console with ui5 debug entries\r\n\t\t// Log.debug(dictMessage.message);\r\n\t\tconsole.log(backendMessage.message);\r\n\t}\r\n\r\n\tpublic addMessage(sType: MessageType, sMessage: string, sAdditionalText?: string, sDescription?: string) {\r\n\t\tif (sType === 'Error') {\r\n\t\t\tsType = MessageType.Error;\r\n\t\t}\r\n\t\tvar oMessage = new Message({\r\n\t\t\ttype: sType,\r\n\t\t\tmessage: sMessage,\r\n\t\t\tadditionalText: sAdditionalText,\r\n\t\t\tdescription: sDescription\r\n\t\t});\r\n\t\tthis._oMessageManager.addMessages(oMessage);\r\n\t}\r\n\r\n\tpublic removeAllMessages() {\r\n\t\tthis._oMessageManager.removeAllMessages();\r\n\t}\r\n} "],"mappings":";QAESA,WAAW;EAIpB;AACA;AACA;EAFA,MAGqBC,WAAW,GAASC,aAAa;IAe7CC,WAAW,wBAACC,QAAmB,EAAE;MACxC;MACA;MACA;MACA,IAAI,CAACC,gBAAgB,GAAGC,GAAG,CAACC,EAAE,CAACC,OAAO,EAAE,CAACC,iBAAiB,EAAE;MAC5DL,QAAQ,CAACM,QAAQ,CAAC,IAAI,CAACL,gBAAgB,CAACM,eAAe,EAAE,EAAE,UAAU,CAAC;IACvE,CAAC;IAEMC,qBAAqB,kCAACC,cAAwB,EAAE;MACtD;MACA;MACA,IAAIA,cAAc,CAACC,IAAI,KAAK,OAAO,EAAE;QACpC,IAAIC,QAAQ,GAAG,IAAIC,OAAO,CAAC;UAC1BF,IAAI,EAAED,cAAc,CAACC,IAAI;UACzBG,OAAO,EAAEJ,cAAc,CAACI,OAAO;UAC/BC,cAAc,EAAEL,cAAc,CAACK,cAAc;UAC7CC,WAAW,EAAEN,cAAc,CAACM;QAC7B,CAAC,CAAC;QACF,IAAI,CAACd,gBAAgB,CAACe,WAAW,CAACL,QAAQ,CAAC;MAC5C;;MAEA;MACA;MACAM,OAAO,CAACC,GAAG,CAACT,cAAc,CAACI,OAAO,CAAC;IACpC,CAAC;IAEMM,UAAU,uBAACC,KAAkB,EAAEC,QAAgB,EAAEC,eAAwB,EAAEC,YAAqB,EAAE;MACxG,IAAIH,KAAK,KAAK,OAAO,EAAE;QACtBA,KAAK,GAAGxB,WAAW,CAAC4B,KAAK;MAC1B;MACA,IAAIb,QAAQ,GAAG,IAAIC,OAAO,CAAC;QAC1BF,IAAI,EAAEU,KAAK;QACXP,OAAO,EAAEQ,QAAQ;QACjBP,cAAc,EAAEQ,eAAe;QAC/BP,WAAW,EAAEQ;MACd,CAAC,CAAC;MACF,IAAI,CAACtB,gBAAgB,CAACe,WAAW,CAACL,QAAQ,CAAC;IAC5C,CAAC;IAEMc,iBAAiB,gCAAG;MAC1B,IAAI,CAACxB,gBAAgB,CAACwB,iBAAiB,EAAE;IAC1C;EAAC;EAxDmB5B,WAAW,CAIjB6B,WAAW,YAAXA,WAAW,CAAC1B,QAAoB,EAAe;IAC5D,IAAI,CAACH,WAAW,CAAC8B,SAAS,IAAI,CAAC3B,QAAQ,EAAE;MACxC,MAAM,IAAIwB,KAAK,CAAC,qDAAqD,CAAC;IACvE,CAAC,MAAM,IAAI3B,WAAW,CAAC8B,SAAS,IAAI3B,QAAQ,EAAE;MAC7C,MAAM,IAAIwB,KAAK,CAAC,iCAAiC,CAAC;IACnD,CAAC,MAAM,IAAI,CAAC3B,WAAW,CAAC8B,SAAS,IAAI3B,QAAQ,EAAE;MAC9CH,WAAW,CAAC8B,SAAS,GAAG,IAAI9B,WAAW,CAACG,QAAQ,CAAC;IAClD;IACA,OAAOH,WAAW,CAAC8B,SAAS;EAC7B,CAAC;EAAA,OAbmB9B,WAAW;AAAA"}