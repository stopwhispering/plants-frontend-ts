sap.ui.define(["sap/m/MessageToast","plants/ui/customClasses/Util"],function(e,t){function n(t){var n=t.getSource().data("sModel");if(t.getId()==="suggestionItemSelected"){var a=t.getParameter("selectedRow").getBindingContext("plants").getObject().plant_name}else{a=t.getParameter("value").trim()}if(!this.isPlantNameInPlantsModel(a)||!a){e.show("Plant Name does not exist.");return}var s=t.getSource().getParent().getBindingContext(n);var i=this.getPlantId(a);this.imageEventHandlers._addPlantNameToImage(a,i,s);t.getSource().setValue("")}function a(e){var t=this.getPlantById(this._currentPlantId);var n=e.getSource().getParent().getBindingContext("untaggedImages");this.imageEventHandlers._addPlantNameToImage(t.plant_name,t.id,n);this.resetImagesCurrentPlant(this._currentPlantId)}function s(n,a,s){var i=s.getObject().plants;var g={key:n,text:n,plant_id:a};if(t.isDictKeyInArray(g,i)){e.show("Plant Name already assigned. ");return false}else{i.push(g);console.log("Assigned plant to image: "+n+" ("+s.getPath()+")");s.getModel().updateBindings();return true}}function i(e,t){var n=t.getSource().getBindingContext(e).getObject().plant_id;if(n>=0){this.navigation.navToPlantDetails.call(this,n)}else{this.handleErrorMessageBox("Can't find selected Plant")}}function g(e){var t=e.getSource();var n=e.getSource().getBindingContext("images").getPath();this.applyToFragment("dialogAssignEventToImage",e=>{e.bindElement({path:n,model:"images"});e.openBy(t)})}function r(t){var n=t.getSource().getBindingContextPath("events");var a=t.getSource().getBindingContext("images").getObject();var s={filename:a.filename};var i=this.getView().getModel("events").getProperty(n);if(!!i.images&&i.images.length>0){var g=i.images.find(function(e){return e.filename===s.filename});if(g){e.show("Event already assigned to image.");this._getFragment("dialogAssignEventToImage").close();return}}if(!i.images){i.images=[s]}else{i.images.push(s)}e.show("Assigned.");this.getView().getModel("events").updateBindings();this._getFragment("dialogAssignEventToImage").close()}function o(t){var n=t.getParameter("listItem").getBindingContextPath("events");var a=t.getSource().getModel("events").getProperty(n);var s=n.substring(0,n.lastIndexOf("/"));var i=this.getOwnerComponent().getModel("events").getProperty(s);var g=i.indexOf(a);if(g===-1){e.show("Can't find image.");return}i.splice(g,1);this.getOwnerComponent().getModel("events").refresh()}var l={__esModule:true};l.onInputImageNewPlantNameSubmit=n;l.onIconPressTagDetailsPlant=a;l._addPlantNameToImage=s;l.onPressImagePlantToken=i;l.onIconPressAssignImageToEvent=g;l.onAssignEventToImage=r;l.onIconPressUnassignImageFromEvent=o;return l});